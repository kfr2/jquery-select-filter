(function(e){e.fn.selectFilter=function(t){var n={caseSensitive:!1,clearInputOnEscape:!0,disableRegex:!0,filterClass:"filter-bar",inputPlaceholder:"type to filter list",minimumCharacters:3,minimumSelectElementSize:3,searchDelay:200,searchFromBeginning:!1,width:-1};t=e.extend(n,t);var r=this;if(!r||r.get(0).tagName!=="SELECT")return!1;var i=r.children().clone(),s=t.width;s===-1&&(s=r.width());var o=s.toString();isFinite(o)&&(o+="px"),r.css("width",o);var u="";typeof r.attr("name")=="undefined"?u="undefined_name":u=r.attr("name").replace(/\]/g,"").replace(/\[/g,""),(typeof r.attr("size")=="undefined"||r.attr("size")<t.minimumSelectElementSize)&&r.attr("size",t.minimumSelectElementSize);var a=e("<input>",{id:"input_"+u,type:"text",placeholder:t.inputPlaceholder,"class":t.filterClass,style:"display: block; width: "+o});r.addClass(u+"_select").css({display:"block"}).after(a),t.clearInputOnEscape&&e("#input_"+u).on("keydown",function(t){t.which===27&&e(this).val("")});var f,l=!1,c=null;return e("#input_"+u).on("keyup",function(){clearTimeout(f);var n=e(this).val();if(!l&&n.length<t.minimumCharacters)return;l=!0,f=setTimeout(function(){c!==null&&n.length<=c.length&&(r.children().remove(),r.append(i)),c=n,t.caseSensitive||(n=n.toLowerCase()),t.disableRegex&&(n=n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")),t.searchFromBeginning&&(n="^"+n);var s=new RegExp(n);r.children().each(function(n,r){var i=e(this).text();t.caseSensitive||(i=i.toLowerCase()),s.test(i)||e(r).remove()}),r.children().length===0&&r.append("<option disabled>(No results.)</option>"),clearTimeout(f)},t.searchDelay)}),this}})(jQuery);